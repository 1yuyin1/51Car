#include <REGX51.H>
#include "delay.h"

sbit SDA=P0^7;
sbit SCL=P0^6;


void IIC_start()
{ SCL=1;
  delayus(3);
  SDA=1;
  delayus(3);
  SDA=0;
  delayus(3);
}
void IIC_send(unsigned char send_data)
{  char i;
  for(i = 0;i < 8;i++)
  {
      SCL=0;
      delayus(3);
      if(send_data & 0x01)
      {
        SDA=1;
      }
      else
      {
        SDA=0;
      }
      delayus(3);
      SCL=1;
      delayus(3);
      send_data = send_data >> 1;
  }
}

void IIC_end()
{
  SCL=0;
  delayus(3);
  SDA=0;
  delayus(3);
  SCL=1;
  delayus(3);
  SDA=1;
  delayus(3);
}

void matrix_display(unsigned char matrix_value[])
{ int i;
  IIC_start();  // use the function of the data transmission start condition
  IIC_send(0xc0);  //select address
  for(i = 0;i < 16;i++) //pattern data has 16 bits
  {
     IIC_send(matrix_value[i]); //convey the pattern data
  }

  IIC_end();   //end the transmission of pattern data  
  IIC_start();
  IIC_send(0x8A);  //display control, set pulse width to 4/16 s
  IIC_end();
}


unsigned char code smile[] = {0x00, 0x00, 0x1c, 0x02, 0x02, 0x02, 0x5c, 0x40, 0x40, 0x5c, 0x02, 0x02, 0x02, 0x1c, 0x00, 0x00};
unsigned char code Start [] ={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01};
unsigned char code Gofront []={0x00,0x00,0x00,0x00,0x00,0x00,0x24,0x12,0x09,0x12,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
unsigned char code Goback []={0x00,0x00,0x00,0x00,0x00,0x00,0x24,0x48,0x90,0x48,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
unsigned char code Turnleft []={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x44,0x28,0x10,0x44,0x28,0x10,0x44,0x28,0x10,0x00};
unsigned char code Turnright []={0x00,0x10,0x28,0x44,0x10,0x28,0x44,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,0x00};
unsigned char code Stop []={0x2E,0x2A,0x3A,0x00,0x02,0x3E,0x02,0x00,0x3E,0x22,0x3E,0x00,0x3E,0x0A,0x0E,0x00};
unsigned char code clear []={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

void boar(unsigned char image[])
{SCL=0;
  SDA=0;
matrix_display(image);

}
void main()
{ 
boar(smile);
}